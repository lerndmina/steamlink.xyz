---
import Layout from "../layouts/Layout.astro"
---


<Layout title="Steam Link Converter">
    <div class="container mx-auto mt-24 text-center bg-gray-800 p-10 rounded-lg shadow-lg w-full max-w-md">
        <h1 class="text-3xl font-bold text-blue-400 mb-6">Steam Link Converter</h1>
        <p class="text-lg text-gray-400 mb-8">Convert your steam:// links into clickable links that will open directly in Steam.</p>
        <form action="#" method="post" class="space-y-6">
            <input type="text" id="steamLink" name="steamLink" placeholder="Enter your steam:// link" required 
                   class="w-full p-3 rounded bg-gray-700 border border-gray-600 focus:border-blue-400 focus:outline-none">
            <input type="submit" value="Convert" 
                   class="w-full p-3 bg-blue-500 text-white font-bold rounded cursor-pointer hover:bg-blue-600">
        </form>
        <div id="result" class="hidden mt-6 p-3 bg-gray-700 rounded"></div>
    </div>

    <div class="info-section mt-12 bg-gray-800 p-10 rounded-lg shadow-lg w-full max-w-3xl text-left">
        <h2 class="text-2xl font-bold text-blue-400 mb-6">What is a steam:// Link?</h2>
        <p class="text-lg text-gray-400 mb-4">
            A <strong class="text-white">steam://</strong> link is a special type of URL that interacts directly with the Steam client.
            These links can be used to open the Steam client, install or launch a game, join a server, or visit a community page, among other things.
        </p>
        <p class="text-lg text-gray-400 mb-4">
            For example, a link like <code class="bg-gray-700 p-1 rounded text-white">steam://install/570</code> will prompt the Steam client to install Dota 2, and
            <code class="bg-gray-700 p-1 rounded text-white">steam://run/570</code> will launch the game if it's installed.
        </p>
        <p class="text-lg text-gray-400 mb-4">
            My site helps by taking any valid <strong class="text-white">steam://</strong> link and converting it into a clickable link that you can easily share with others.
            This can be particularly useful for content creators, game developers, or community managers who want to create direct links to their games, servers, or community pages.
        </p>
        <p class="text-lg text-gray-400">
            Learn more about Steam's deep linking capabilities in the 
            <a href="https://developer.valvesoftware.com/wiki/Steam_browser_protocol" target="_blank" class="text-blue-400 hover:underline">Steam Browser Protocol documentation</a>.
        </p>
    </div>
		<footer class="mt-12 text-center text-gray-500">
			<p>Made with love by <a href="https://imadam.io" target="_blank" class="text-blue-400 hover:underline">imadam.io</a></p>
	</footer>
</Layout>

<script>
	// Intercept the form submission and convert the steam:// link
	const currentDomain = window.location.hostname;
	const form = document.querySelector('form');
	const result = document.getElementById('result');
	if (!form || !result) {
		throw new Error('Form or result element not found');
	}
	form.addEventListener('submit', function(event) {
		event.preventDefault();
		const steamLink = form.steamLink.value.trim();
		if (!steamLink) {
			setResult(result, 'Please enter a steam:// link', true);
			return;
		}

		const steamRegex = /^steam:\/\/[a-zA-Z0-9\/\-\_]+$/;
		if (!steamRegex.test(steamLink)) {
			setResult(result, 'Invalid steam:// link format', true);
			return;
		}

		const convertedLink = steamLink.replace('steam://', `https://${currentDomain}/`);
		setResult(result, convertedLink);
	});

	function setResult(result: HTMLElement, text: string, isError: boolean = false) {
		result.textContent = text;
		result.classList.toggle('hidden', !text);
		result.classList.toggle('bg-red-500', isError);
		result.classList.toggle('bg-green-500', !isError);
	}
</script>